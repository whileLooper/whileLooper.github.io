---
title: Continuous Integration
layout: post
date:   2017-01-20 21:37:00
tags: ['Angular 2', 'Firebase', 'Travis CI', 'Deployment', 'Github']
author: "Bo Chen"
---

### What is CI (continuous integration)

Continuous integration refers to the build and unit testing stages of the software release process. 
Every revision that is committed triggers an automated build and test.
<!-- more --> 

![CI](/images/posts/2017/continuous_integration.png)
---

### Travis CI + Github + Firebase + Angular 2

1. Firebase init in project
2. Writing code in local repo
3. Pushing to Github repo
4. Building code production in Travis CI
5. Deploying production code to Firebase hosting

---

#### Firebase init

Before using [Google Firebase](https://firebase.google.com/), need to apply for 
firebase account.

There are many features which Firebase provides for us, such as Authentication, 
Database, Storage, Hosting... 

In this blog, only need to use Hosting feature, which is free.

Do the Firebase initialization in the existing project directory

~~~sh
npm install --save firebase-tools

firebase init
~~~

Following the `firebase init` instruction to config your project, 
for my case, I'm building an Angular2 project, so I choose `dist` as my public 
directory.

After the initialization, need an access token for CI as environment variable.
[Using with CI Systems](https://github.com/firebase/firebase-tools#using-with-ci-systems)

then do a deploy test:

~~~sh
firebase deploy
~~~

---

#### Using Travis CI
Greate documentation the complete beginner [here](https://docs.travis-ci.com/user/for-beginners)

- Connecting Github account to Travis CI
- Choosing Github project repo to async
- Setting Firebase Token as the environment variable in Travis
- Writing a `travis.yml` config file in your project directory 
[Customizing the Build](https://docs.travis-ci.com/user/customizing-the-build/)

In order to deploy project from Travis, inside the `travis.yml`, add:

~~~yml
after_success:
  - firebase deploy --token ${FIREBASE_TOKEN}
~~~

write script to build your project:

~~~yml
script:
  - npm install
  - npm run build:prod
~~~

---

#### Push change to Github, build prod on Travis CI, Deploy to Firebase
Done!

Everything is automated!

Awesome! ðŸ˜Ž


