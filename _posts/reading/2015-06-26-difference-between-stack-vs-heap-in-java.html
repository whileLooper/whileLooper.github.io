---
layout: post
title: Difference between Stack vs Heap in Java
date: 2015-06-26 02:55:19.000000000 -04:00
summary:	Stack is used to store primitive value and reference type to object but actual object is always created in Heap. One critical difference between heap and stack is, heap memory is shared by all threads but each thread has their own stack.
categories:	reading
tags:
- java
---
<p>Stack and Heap are two separate areas of memory in same process. Stack is used to store primitive value and reference type to object but actual object is always created in Heap. One critical difference between heap and stack is, heap memory is shared by all threads but each thread has their own stack.<!--more--></p>
<blockquote><p>1) Main difference between heap and stack is that stack memory is used to store <a href="http://javarevisited.blogspot.com/2012/02/difference-between-instance-class-and.html">local variables</a> and function call, while heap memory is used to store objects in Java. No matter, where object is created in code e.g. as member variable, local variable or class variable,  they are always created inside heap space in Java.</p>
<p>2) Each <a href="http://javarevisited.blogspot.com/2011/02/how-to-implement-thread-in-java.html">Thread in Java</a> has there own stack which can be specified using -Xss JVM parameter, similarly you can also specify heap size of Java program using JVM option -Xms and -Xmx where -Xms is starting size of heap and -Xmx is maximum size of java heap. to learn more about JVM options see my post <a href="http://javarevisited.blogspot.com/2011/11/hotspot-jvm-options-java-examples.html">10 JVM option Java programmer should know</a>.</p>
<p>3) If there is no memory left in stack for storing function call or local variable, JVM will throw java.lang.StackOverFlowError, while if there is no more heap space for creating object, JVM will throw java.lang.OutOfMemoryError: Java Heap Space. Read more about how to deal with java.lang.OutOfMemoryError  in my post <a href="http://javarevisited.blogspot.com/2011/09/javalangoutofmemoryerror-permgen-space.html">2 ways to solve OutOfMemoryError in Java</a>.</p>
<p>4) If you are using <a href="http://javarevisited.blogspot.com/2012/12/recursion-in-java-with-example-programming.html">Recursion</a>, on which method calls itself, You can quickly fill up stack memory. Another difference between stack and heap is that size of stack memory is lot lesser than size of  heap memory in Java.</p>
<p>5) Variables stored in stacks are only visible to the owner Thread, while objects created in heap are visible to all thread. In other words stack memory is kind of private memory of Java Threads, while heap memory is shared among all threads.</p>
</blockquote>
<p>Source: <a href="http://javarevisited.blogspot.com/2013/01/difference-between-stack-and-heap-java.html#ixzz3e8JSlp4h">Javarevisited</a></p>
