---
layout: post
title: Git常用命令备忘
date: 2015-06-16 03:00:10.000000000 
summary:	git command memo
categories:	work
tags:
- git
---
<h2></h2>
<h2><strong>Git配置</strong></h2>
<blockquote>
<pre class="prettyprint"><code><span class="pln">git config </span><span class="pun">--</span><span class="kwd">global</span><span class="pln"> user</span><span class="pun">.</span><span class="pln">name </span><span class="str">"robbin"</span><span class="pln">   
git config </span><span class="pun">--</span><span class="kwd">global</span><span class="pln"> user</span><span class="pun">.</span><span class="pln">email </span><span class="str">"fankai@gmail.com"</span><span class="pln">
git config </span><span class="pun">--</span><span class="kwd">global</span><span class="pln"> color</span><span class="pun">.</span><span class="pln">ui </span><span class="kwd">true</span><span class="pln">
git config </span><span class="pun">--</span><span class="kwd">global</span> <span class="kwd">alias</span><span class="pun">.</span><span class="pln">co checkout
git config </span><span class="pun">--</span><span class="kwd">global</span> <span class="kwd">alias</span><span class="pun">.</span><span class="pln">ci commit
git config </span><span class="pun">--</span><span class="kwd">global</span> <span class="kwd">alias</span><span class="pun">.</span><span class="pln">st status
git config </span><span class="pun">--</span><span class="kwd">global</span> <span class="kwd">alias</span><span class="pun">.</span><span class="pln">br branch
git config </span><span class="pun">--</span><span class="kwd">global</span><span class="pln"> core</span><span class="pun">.</span><span class="pln">editor </span><span class="str">"mate -w"</span>    <span class="com"># 设置Editor使用textmate</span><span class="pln">
git config </span><span class="pun">-</span><span class="pln">l  </span><span class="com"># 列举所有配置</span></code></pre>
<p>用户的git配置文件<code>~/.gitconfig</code></p></blockquote>
<h2><!--more--></h2>
<h2></h2>
<blockquote>
<h2><strong>Git常用命令</strong></h2>
<p><strong>查看、添加、提交、删除、找回，重置修改文件</strong></p>
<pre class="prettyprint"><code><span class="pln">git help </span><span class="str">&lt;command&gt;</span>  <span class="com"># 显示command的help</span><span class="pln">
git show            </span><span class="com"># 显示某次提交的内容</span><span class="pln">
git show $id

git co  </span><span class="pun">--</span> <span class="str">&lt;file&gt;</span>   <span class="com"># 抛弃工作区修改</span><span class="pln">
git co  </span><span class="pun">.</span>           <span class="com"># 抛弃工作区修改</span><span class="pln">

git add </span><span class="str">&lt;file&gt;</span>      <span class="com"># 将工作文件修改提交到本地暂存区</span><span class="pln">
git add </span><span class="pun">.</span>           <span class="com"># 将所有修改过的工作文件提交暂存区</span><span class="pln">

git rm </span><span class="str">&lt;file&gt;</span>       <span class="com"># 从版本库中删除文件</span><span class="pln">
git rm </span><span class="str">&lt;file&gt;</span> <span class="pun">--</span><span class="pln">cached  </span><span class="com"># 从版本库中删除文件，但不删除文件</span><span class="pln">

git reset </span><span class="str">&lt;file&gt;</span>    <span class="com"># 从暂存区恢复到工作文件</span><span class="pln">
git reset </span><span class="pun">--</span> <span class="pun">.</span>      <span class="com"># 从暂存区恢复到工作文件</span><span class="pln">
git reset </span><span class="pun">--</span><span class="pln">hard    </span><span class="com"># 恢复最近一次提交过的状态，即放弃上次提交后的所有本次修改</span><span class="pln">

git ci </span><span class="str">&lt;file&gt;</span><span class="pln">
git ci </span><span class="pun">.</span><span class="pln">
git ci </span><span class="pun">-</span><span class="pln">a           </span><span class="com"># 将git add, git rm和git ci等操作都合并在一起做</span><span class="pln">
git ci </span><span class="pun">-</span><span class="pln">am </span><span class="str">"some comments"</span><span class="pln">
git ci </span><span class="pun">--</span><span class="pln">amend      </span><span class="com"># 修改最后一次提交记录</span><span class="pln">

git revert </span><span class="pun">&lt;</span><span class="pln">$id</span><span class="pun">&gt;</span>    <span class="com"># 恢复某次提交的状态，恢复动作本身也创建了一次提交对象</span><span class="pln">
git revert HEAD     </span><span class="com"># 恢复最后一次提交的状态</span></code></pre>
<p><strong>查看文件diff</strong></p>
<pre class="prettyprint"><code><span class="pln">git diff </span><span class="str">&lt;file&gt;</span>     <span class="com"># 比较当前文件和暂存区文件差异</span><span class="pln">
git diff
git diff </span><span class="pun">&lt;</span><span class="pln">$id1</span><span class="pun">&gt;</span> <span class="pun">&lt;</span><span class="pln">$id2</span><span class="pun">&gt;</span>   <span class="com"># 比较两次提交之间的差异</span><span class="pln">
git diff </span><span class="str">&lt;branch1&gt;</span><span class="pun">..&lt;</span><span class="pln">branch2</span><span class="pun">&gt;</span> <span class="com"># 在两个分支之间比较 </span><span class="pln">
git diff </span><span class="pun">--</span><span class="pln">staged   </span><span class="com"># 比较暂存区和版本库差异</span><span class="pln">
git diff </span><span class="pun">--</span><span class="pln">cached   </span><span class="com"># 比较暂存区和版本库差异</span><span class="pln">
git diff </span><span class="pun">--</span><span class="pln">stat     </span><span class="com"># 仅仅比较统计信息</span></code></pre>
<p><strong>查看提交记录</strong></p>
<pre class="prettyprint"><code><span class="pln">git log
git log </span><span class="str">&lt;file&gt;</span>      <span class="com"># 查看该文件每次提交记录</span><span class="pln">
git log </span><span class="pun">-</span><span class="pln">p </span><span class="str">&lt;file&gt;</span>   <span class="com"># 查看每次详细修改内容的diff</span><span class="pln">
git log </span><span class="pun">-</span><span class="pln">p </span><span class="pun">-</span><span class="lit">2</span>       <span class="com"># 查看最近两次详细修改内容的diff</span><span class="pln">
git log </span><span class="pun">--</span><span class="pln">stat      </span><span class="com"># 查看提交统计信息</span></code></pre>
<p><strong>tig</strong></p>
<p>Mac上可以使用<code>tig</code>代替<code>diff</code>和<code>log</code>，<code>brew install tig</code></p>
<h2><strong>Git 本地分支管理</strong></h2>
<p><strong>查看、切换、创建和删除分支</strong></p>
<pre class="prettyprint"><code><span class="pln">git br </span><span class="pun">-</span><span class="pln">r           </span><span class="com"># 查看远程分支</span><span class="pln">
git br </span><span class="str">&lt;new_branch&gt;</span> <span class="com"># 创建新的分支</span><span class="pln">
git br </span><span class="pun">-</span><span class="pln">v           </span><span class="com"># 查看各个分支最后提交信息</span><span class="pln">
git br </span><span class="pun">--</span><span class="pln">merged     </span><span class="com"># 查看已经被合并到当前分支的分支</span><span class="pln">
git br </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">merged  </span><span class="com"># 查看尚未被合并到当前分支的分支</span><span class="pln">

git co </span><span class="str">&lt;branch&gt;</span>     <span class="com"># 切换到某个分支</span><span class="pln">
git co </span><span class="pun">-</span><span class="pln">b </span><span class="str">&lt;new_branch&gt;</span> <span class="com"># 创建新的分支，并且切换过去</span><span class="pln">
git co </span><span class="pun">-</span><span class="pln">b </span><span class="str">&lt;new_branch&gt;</span> <span class="str">&lt;branch&gt;</span>  <span class="com"># 基于branch创建新的new_branch</span><span class="pln">

git co $id          </span><span class="com"># 把某次历史提交记录checkout出来，但无分支信息，切换到其他分支会自动删除</span><span class="pln">
git co $id </span><span class="pun">-</span><span class="pln">b </span><span class="str">&lt;new_branch&gt;</span>  <span class="com"># 把某次历史提交记录checkout出来，创建成一个分支</span><span class="pln">

git br </span><span class="pun">-</span><span class="pln">d </span><span class="str">&lt;branch&gt;</span>  <span class="com"># 删除某个分支</span><span class="pln">
git br </span><span class="pun">-</span><span class="pln">D </span><span class="str">&lt;branch&gt;</span>  <span class="com"># 强制删除某个分支 (未被合并的分支被删除的时候需要强制)</span></code></pre>
<p><strong>分支合并和rebase</strong></p>
<pre class="prettyprint"><code><span class="pln">git merge </span><span class="str">&lt;branch&gt;</span>               <span class="com"># 将branch分支合并到当前分支</span><span class="pln">
git merge origin</span><span class="pun">/</span><span class="pln">master </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">ff  </span><span class="com"># 不要Fast-Foward合并，这样可以生成merge提交</span><span class="pln">

git rebase master </span><span class="str">&lt;branch&gt;</span>       <span class="com"># 将master rebase到branch，相当于：</span><span class="pln">
git co </span><span class="str">&lt;branch&gt;</span> <span class="pun">&amp;&amp;</span><span class="pln"> git rebase master </span><span class="pun">&amp;&amp;</span><span class="pln"> git co master </span><span class="pun">&amp;&amp;</span><span class="pln"> git merge </span><span class="str">&lt;branch&gt;</span></code></pre>
<h2><strong>Git补丁管理(方便在多台机器上开发同步时用)</strong></h2>
<pre class="prettyprint"><code><span class="pln">git diff </span><span class="pun">&gt;</span> <span class="pun">../</span><span class="pln">sync</span><span class="pun">.</span><span class="pln">patch         </span><span class="com"># 生成补丁</span><span class="pln">
git apply </span><span class="pun">../</span><span class="pln">sync</span><span class="pun">.</span><span class="pln">patch          </span><span class="com"># 打补丁</span><span class="pln">
git apply </span><span class="pun">--</span><span class="pln">check </span><span class="pun">../</span><span class="pln">sync</span><span class="pun">.</span><span class="pln">patch  </span><span class="com"># 测试补丁能否成功</span></code></pre>
<h2><strong>Git暂存管理</strong></h2>
<pre class="prettyprint"><code><span class="pln">git stash                        </span><span class="com"># 暂存</span><span class="pln">
git stash list                   </span><span class="com"># 列所有stash</span><span class="pln">
git stash apply                  </span><span class="com"># 恢复暂存的内容</span><span class="pln">
git stash drop                   </span><span class="com"># 删除暂存区</span></code></pre>
<h2><strong>Git远程分支管理</strong></h2>
<pre class="prettyprint"><code><span class="pln">git pull                         </span><span class="com"># 抓取远程仓库所有分支更新并合并到本地</span><span class="pln">
git pull </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">ff                 </span><span class="com"># 抓取远程仓库所有分支更新并合并到本地，不要快进合并</span><span class="pln">
git fetch origin                 </span><span class="com"># 抓取远程仓库更新</span><span class="pln">
git merge origin</span><span class="pun">/</span><span class="pln">master          </span><span class="com"># 将远程主分支合并到本地当前分支</span><span class="pln">
git co </span><span class="pun">--</span><span class="pln">track origin</span><span class="pun">/</span><span class="pln">branch     </span><span class="com"># 跟踪某个远程分支创建相应的本地分支</span><span class="pln">
git co </span><span class="pun">-</span><span class="pln">b </span><span class="str">&lt;local_branch&gt;</span><span class="pln"> origin</span><span class="pun">/&lt;</span><span class="pln">remote_branch</span><span class="pun">&gt;</span>  <span class="com"># 基于远程分支创建本地分支，功能同上</span><span class="pln">

git push                         </span><span class="com"># push所有分支</span><span class="pln">
git push origin master           </span><span class="com"># 将本地主分支推到远程主分支</span><span class="pln">
git push </span><span class="pun">-</span><span class="pln">u origin master        </span><span class="com"># 将本地主分支推到远程(如无远程主分支则创建，用于初始化远程仓库)</span><span class="pln">
git push origin </span><span class="str">&lt;local_branch&gt;</span>   <span class="com"># 创建远程分支， origin是远程仓库名</span><span class="pln">
git push origin </span><span class="str">&lt;local_branch&gt;</span><span class="pun">:&lt;</span><span class="pln">remote_branch</span><span class="pun">&gt;</span>  <span class="com"># 创建远程分支</span><span class="pln">
git push origin </span><span class="pun">:&lt;</span><span class="pln">remote_branch</span><span class="pun">&gt;</span>  <span class="com">#先删除本地分支(git br -d )，然后再push删除远程分支</span></code></pre>
<h2><strong>Git远程仓库管理</strong></h2>
<pre class="prettyprint"><code><span class="pln">git remote </span><span class="pun">-</span><span class="pln">v                    </span><span class="com"># 查看远程服务器地址和仓库名称</span><span class="pln">
git remote show origin           </span><span class="com"># 查看远程服务器仓库状态</span><span class="pln">
git remote add origin git@github</span><span class="pun">:</span><span class="pln">robbin</span><span class="pun">/</span><span class="pln">robbin_site</span><span class="pun">.</span><span class="pln">git         </span><span class="com"># 添加远程仓库地址</span><span class="pln">
git remote </span><span class="kwd">set</span><span class="pun">-</span><span class="pln">url origin git@github</span><span class="pun">.</span><span class="pln">com</span><span class="pun">:</span><span class="pln">robbin</span><span class="pun">/</span><span class="pln">robbin_site</span><span class="pun">.</span><span class="pln">git </span><span class="com"># 设置远程仓库地址(用于修改远程仓库地址)</span><span class="pln">
git remote rm </span><span class="str">&lt;repository&gt;</span>       <span class="com"># 删除远程仓库</span></code></pre>
<p><strong>创建远程仓库</strong></p>
<pre class="prettyprint"><code><span class="pln">git clone </span><span class="pun">--</span><span class="pln">bare robbin_site robbin_site</span><span class="pun">.</span><span class="pln">git  </span><span class="com"># 用带版本的项目创建纯版本仓库</span><span class="pln">
scp </span><span class="pun">-</span><span class="pln">r my_project</span><span class="pun">.</span><span class="pln">git git@git</span><span class="pun">.</span><span class="pln">csdn</span><span class="pun">.</span><span class="pln">net</span><span class="pun">:~</span>      <span class="com"># 将纯仓库上传到服务器上</span><span class="pln">

mkdir robbin_site</span><span class="pun">.</span><span class="pln">git </span><span class="pun">&amp;&amp;</span><span class="pln"> cd robbin_site</span><span class="pun">.</span><span class="pln">git </span><span class="pun">&amp;&amp;</span><span class="pln"> git </span><span class="pun">--</span><span class="pln">bare init </span><span class="com"># 在服务器创建纯仓库</span><span class="pln">
git remote add origin git@github</span><span class="pun">.</span><span class="pln">com</span><span class="pun">:</span><span class="pln">robbin</span><span class="pun">/</span><span class="pln">robbin_site</span><span class="pun">.</span><span class="pln">git    </span><span class="com"># 设置远程仓库地址</span><span class="pln">
git push </span><span class="pun">-</span><span class="pln">u origin master                                      </span><span class="com"># 客户端首次提交</span><span class="pln">
git push </span><span class="pun">-</span><span class="pln">u origin develop  </span><span class="com"># 首次将本地develop分支提交到远程develop分支，并且track</span><span class="pln">

git remote </span><span class="kwd">set</span><span class="pun">-</span><span class="pln">head origin master   </span><span class="com"># 设置远程仓库的HEAD指向master分支</span></code></pre>
<p>也可以命令设置跟踪远程库和本地库</p>
<pre class="prettyprint"><code><span class="pln">git branch </span><span class="pun">--</span><span class="kwd">set</span><span class="pun">-</span><span class="pln">upstream master origin</span><span class="pun">/</span><span class="pln">master
git branch </span><span class="pun">--</span><span class="kwd">set</span><span class="pun">-</span><span class="pln">upstream develop origin</span><span class="pun">/</span><span class="pln">develop

Source:robbinfan.com/blog/34/git-common-command
Author：robbin</span></code></pre>
</blockquote>
